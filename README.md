# Django Tree Menu

Django приложение для создания и управления древовидными меню с поддержкой иерархии и автоматическим определением активного пункта.

## Возможности

- Древовидная структура меню с неограниченной вложенностью
- Автоматическое определение активного пункта по URL текущей страницы
- Разворачивание всех веток до активного пункта + первый уровень вложенности под активным
- Поддержка как обычных URL, так и named URL
- Редактирование через стандартную админку Django
- Кеширование для оптимизации производительности
- Всего 1 запрос к БД на отрисовку меню
- Template tag для простого использования в шаблонах

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd TestBack
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate     # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Выполните миграции:
```bash
python manage.py makemigrations
python manage.py migrate
```

5. Создайте суперпользователя:
```bash
python manage.py createsuperuser
```

6. Запустите сервер разработки:
```bash
python manage.py runserver
```

## Использование

### 1. Создание меню через админку

1. Откройте http://127.0.0.1:8000/admin/
2. Войдите с учетными данными суперпользователя
3. Создайте новое меню в разделе "Меню"
4. Добавьте пункты меню в разделе "Пункты меню"

### 2. Использование в шаблонах

```html
{% load menu_tags %}

<!-- Отрисовка меню по названию -->
{% draw_menu 'main_menu' %}
```

### 3. Настройка URL

Меню поддерживает два типа URL:

1. **Обычный URL**: `/about/`, `/services/`, `/contact/`
2. **Named URL**: `home`, `about`, `services`, `contact`

### 4. Структура меню

Пример структуры меню:
```
Главная
├── О нас
├── Услуги
│   ├── Веб-разработка
│   ├── Мобильная разработка
│   └── Консультации
├── Продукты
│   ├── Продукт 1
│   ├── Продукт 2
│   └── Продукт 3
├── Блог
│   ├── Статья 1
│   ├── Статья 2
│   └── Статья 3
└── Контакты
```

## Демонстрация

После запуска сервера откройте http://127.0.0.1:8000/ для просмотра демонстрации.

Доступные страницы:
- Главная: `/`
- О нас: `/about/`
- Услуги: `/services/`
- Детали услуг: `/services/1/`, `/services/2/`, `/services/3/`
- Продукты: `/products/`
- Детали продуктов: `/products/1/`, `/products/2/`, `/products/3/`
- Блог: `/blog/`
- Статьи: `/blog/1/`, `/blog/2/`, `/blog/3/`
- Контакты: `/contact/`

## Технические детали

### Модели

- **Menu**: Группировка пунктов меню
- **MenuItem**: Отдельный пункт меню с поддержкой иерархии

### Template Tags

- `draw_menu`: Основной template tag для отрисовки меню

### Кеширование

Меню кешируется на 1 час для оптимизации производительности. Ключ кеша включает название меню и текущий URL.

### Производительность

- Используется `prefetch_related` для загрузки всех связанных данных одним запросом
- Поддерживается до 4 уровней вложенности в одном запросе
- Кеширование результатов для повторных запросов

## Требования

- Python 3.8+
- Django 4.2+
- SQLite (для разработки)

## Лицензия

MIT License 